{"version":3,"file":"simple-interceptor.js","sourceRoot":"","sources":["../../../../../.ng_build/auth/services/interceptors/simple-interceptor.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AAG7D,OAAO,EAAE,SAAS,EAAE,MAAM,0BAA0B,CAAC;AAErD,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAEhD,OAAO,EAAE,0BAA0B,EAAE,MAAM,oBAAoB,CAAC;;IAK9D,iCAAoB,QAAkB,EACoB;;QADtC,aAAQ,GAAR,QAAQ,CAAU;QACoB,eAAU,GAAV,UAAU;KACnE;IAED,2CAAS,GAAT,UAAU,GAAqB,EAAE,IAAiB;QAAlD,iBAeC;QAbC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;aAC/B,IAAI,CACH,SAAS,CAAC,UAAC,KAAqB;YAC9B,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC9B,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC;oBACd,UAAU;wBACR,GAAC,KAAI,CAAC,UAAU,IAAG,KAAK,CAAC,QAAQ,EAAE;2BACpC;iBACF,CAAC,CAAC;aACJ;YACD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;;SACzB,CAAC,CACH,CAAC;KACL;IAED,sBAAc,gDAAW;aAAzB;YACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;SACzC;;;OAAA;;gBA1BF,UAAU;;;;gBATkB,QAAQ;gDAatB,MAAM,SAAC,0BAA0B;;kCAbhD;;SAUa,uBAAuB","sourcesContent":["import { Inject, Injectable, Injector } from '@angular/core';\nimport { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Observable } from 'rxjs/Observable';\nimport { switchMap } from 'rxjs/operators/switchMap';\n\nimport { NbAuthService } from '../auth.service';\nimport { NbAuthJWTToken } from '../token.service';\nimport { NB_AUTH_INTERCEPTOR_HEADER } from '../../auth.options';\n\n@Injectable()\nexport class NbAuthSimpleInterceptor implements HttpInterceptor {\n\n  constructor(private injector: Injector,\n              @Inject(NB_AUTH_INTERCEPTOR_HEADER) protected headerName: string = 'Authorization') {\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n    return this.authService.getToken()\n      .pipe(\n        switchMap((token: NbAuthJWTToken) => {\n          if (token && token.getValue()) {\n            req = req.clone({\n              setHeaders: {\n                [this.headerName]: token.getValue(),\n              },\n            });\n          }\n          return next.handle(req);\n        }),\n      );\n  }\n\n  protected get authService(): NbAuthService {\n    return this.injector.get(NbAuthService);\n  }\n}\n"]}